{% extends 'base.html.twig' %}

{% block title %}
    Корзина - {{ parent() }}
{% endblock %}

{% block description %}Корзина{% endblock %}

{% block body %}
    <div class="wrapper"  id="basket-info">
        {% include ":web/partials:basket_info.html.twig" with {'class': 'fake-block'} %}
        {% include ":web/partials:basket_info.html.twig" with {'class': 'fixed'} %}

        <div class="content-block products-list">
            <div class="content-block-inner">
                <div class="product-category">
                    <div class="product-category-items">
                        <table class="table table-striped table-hover table-condensed ">
                            <tbody>
                                <tr v-for="p in products" is="product-row"
                                    :key="p.product.id"
                                    v-bind:id="p.product.id"
                                    v-bind:category_id="p.product.product_category_id"
                                    v-bind:title="p.product.title"
                                    v-bind:price="p.product.price"
                                    v-bind:unit="p.product.unit"
                                    v-bind:in_basket="true"
                                    v-bind:count="p.count"
                                ></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% verbatim %}
    <script type="text/x-template" id="product-row" v-bind:class="{selected: isInBasket}">
        <tr>
            <td>{{ title }}</td>
            <td>{{ price }}</td>
            <td class="unit">
                <div class="input-group input-group-sm">
                    <input class="form-control" v-model="count" type="number" placeholder="1" min="0"/>
                    <div class="input-group-addon">{{ unit }}</div>
                </div>
            </td>
        </tr>
    </script>
    {% endverbatim %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        new BasketController({
            products: {{ products|json_encode()|raw }}
        }, "#basket-info");
    </script>
{% endblock %}
